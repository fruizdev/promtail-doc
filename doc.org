* hosted logs

  nos dirigimos a Home -> Connections -> Add new connection -> Hosted logs


[[file:asset/1.png]]


 y creamos un token para el nuevos dispositivo nos dara una
 configuracion agregando el token recien creado ejemplo:


 #+begin_src yaml

server:
  http_listen_port: 0
  grpc_listen_port: 0
        
positions:
  filename: /tmp/positions.yaml
        
client:
  url: https://354058:glc_eyJvIjoiNzY4NDE4IiwibiI6InN0YWNrLTUwNDY5Ni1pbnRlZ3JhdGlvbi1hcnR1cml0byIsImsiOiIzY2ZNWjVoOHY0MjF2M3NaNTZxbjZQdWwiLCJtIjp7InIiOiJ1cyJ9fQ==@logs-prod-017.grafana.net/api/prom/push
        
scrape_configs:
- job_name: system
  static_configs:
  - targets:
      - localhost
    labels:
      job: varlogs
      __path__: /var/log/*.log

 #+end_src

esta configuracion debe ir dentro de un directorio llamado promtail

debe quedar algo asi /dir/promtail/config.yaml

siendo dir el directorio donde ejecutaremos el compose o comando de docker

ejemplo de comando docker para ejecutar promtail con esta configuracion

#+begin_src bash

docker run --name promtail --volume "$PWD/promtail:/etc/promtail" --volume "/var/log:/var/log" grafana/promtail:main -config.file=/etc/promtail/config.yaml

#+end_src


donde  --volume "/var/log:/var/log"   el primer var log es la ruta desde dondo provienen nuestros logs
